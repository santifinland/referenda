{% load socialaccount %}

<form data-abide>
    <label for="t&c" id="t&cLabel">
        <input type="checkbox" id="t&c" required> Acepto las Condiciones de
            <a href="/dataprotection">Protecci√≥n de Datos</a>
            <a href="/cookies">y Cookies</a>
        <br>
    </label>
</form>

{% for provider in socialaccount.providers %}
{% if provider.id == "openid" %}
{% for brand in provider.get_brands %}
<li>
  <a title="{{brand.name}}" 
     class="socialaccount_provider {{provider.id}} {{brand.id}}" 
     href="{% provider_login_url provider.id openid=brand.openid_url %}"
     >{{brand.name}}</a>
</li>
{% endfor %}
{% endif %}
    {% if provider.name == "Twitter" %}
        <a title="{{provider.name}}" class="socialaccount_provider {{provider.id}}" 
        href="{% provider_login_url provider.id %}" onclick="checkTermsAndConditions()">
        <img src="{{ STATIC_URL }}/img/twitter.png" height="100" width="100"></a>
    {% elif provider.name == "Facebook" %}
        <a title="{{provider.name}}" class="socialaccount_provider {{provider.id}}" 
        href="{% provider_login_url provider.id %}">
        <img src="{{ STATIC_URL }}/img/facebook.png" height="100" width="100"></a>
    {% elif provider.name == "Google" %}
        <a title="{{provider.name}}" class="socialaccount_provider {{provider.id}}" 
        href="{% provider_login_url provider.id %}">
        <img src="{{ STATIC_URL }}/img/google.png" height="100" width="100"></a>
    {% else %}
    {% endif %}
{% endfor %}

<script>
    function checkTermsAndConditions() {
        checkbox = document.getElementById("t&c");
        if (checkbox.checked) {
            console.log("Esta checkeado");
        } else {
            console.log("NO Esta checkeado");
            console.log(document.URL);
            setTimeout(errorTAndC, 1000);
            event.preventDefault();
        }
    }

    function errorTAndC() {
        console.log("coloreando checkeado");
        checkbox = document.getElementById("t&c");
        checkbox.setAttribute("data-invalid", "");
        checkboxLabel = document.getElementById("t&cLabel");
        checkboxLabel.setAttribute("class", "error");
    }
</script>
